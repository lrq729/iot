<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>在线Cron表达式生成器</title>
<meta name="description"
	content="Cron表达式在线生成器,方便的在线生成各类Cron表达式，并可以将Cron表达式的可视化双向解析和生成." />
<meta name="keywords"
	content="cron表达式在线生成,常用cron表达式,常用Cron表达式,cron creater,generate Cron Expression,Cron Expression online,Quartz Cron Expresssion,cron在线生成工具" />
<link rel="shortcut icon" type="image/ico" href="Cron/favicon.ico">
<link href="plug-in/Cron/themes/bootstrap/easyui.min.css" rel="stylesheet"
	type="text/css" />
<style type="text/css">
.line {
	height: 25px;
	line-height: 25px;
	margin: 3px
}

.imp {
	padding-left: 25px
}

.col {
	width: 95px
}

ul {
	list-style: none;
	padding-left: 10px
}

li {
	height: 20px
}
</style>
</head>
<body>
	<center>
		<div class="easyui-layout"
			style="width: 830px; height: 548px; border: 1px rgb(202, 196, 196) solid; border-radius: 5px;">
			<div style="height: 100%;">
				<div class="easyui-tabs" data-options="fit:true,border:false">
					<div title="秒">
						<div class="line">
							<input type="radio" checked="checked" name="second"
								onclick="everyTime(this)"> 每秒 允许的通配符[, - * /]
						</div>
						<div class="line">
							<input type="radio" name="second" onclick="cycle(this)">
							周期从 <input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:58" value="1" id="secondStart_0">
							- <input class="numberspinner" style="width: 60px;"
								data-options="min:2,max:59" value="2" id="secondEnd_0">
							秒
						</div>
						<div class="line">
							<input type="radio" name="second" onclick="startOn(this)">
							从 <input class="numberspinner" style="width: 60px;"
								data-options="min:0,max:59" value="0" id="secondStart_1">
							秒开始,每 <input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:59" value="1" id="secondEnd_1">
							秒执行一次
						</div>
						<div class="line">
							<input type="radio" name="second" id="sencond_appoint">
							指定
						</div>
						<div class="imp secondList">
							<input type="checkbox" value="0">00 <input
								type="checkbox" value="1">01 <input type="checkbox"
								value="2">02 <input type="checkbox" value="3">03
							<input type="checkbox" value="4">04 <input
								type="checkbox" value="5">05 <input type="checkbox"
								value="6">06 <input type="checkbox" value="7">07
							<input type="checkbox" value="8">08 <input
								type="checkbox" value="9">09
						</div>
						<div class="imp secondList">
							<input type="checkbox" value="10">10 <input
								type="checkbox" value="11">11 <input type="checkbox"
								value="12">12 <input type="checkbox" value="13">13
							<input type="checkbox" value="14">14 <input
								type="checkbox" value="15">15 <input type="checkbox"
								value="16">16 <input type="checkbox" value="17">17
							<input type="checkbox" value="18">18 <input
								type="checkbox" value="19">19
						</div>
						<div class="imp secondList">
							<input type="checkbox" value="20">20 <input
								type="checkbox" value="21">21 <input type="checkbox"
								value="22">22 <input type="checkbox" value="23">23
							<input type="checkbox" value="24">24 <input
								type="checkbox" value="25">25 <input type="checkbox"
								value="26">26 <input type="checkbox" value="27">27
							<input type="checkbox" value="28">28 <input
								type="checkbox" value="29">29
						</div>
						<div class="imp secondList">
							<input type="checkbox" value="30">30 <input
								type="checkbox" value="31">31 <input type="checkbox"
								value="32">32 <input type="checkbox" value="33">33
							<input type="checkbox" value="34">34 <input
								type="checkbox" value="35">35 <input type="checkbox"
								value="36">36 <input type="checkbox" value="37">37
							<input type="checkbox" value="38">38 <input
								type="checkbox" value="39">39
						</div>
						<div class="imp secondList">
							<input type="checkbox" value="40">40 <input
								type="checkbox" value="41">41 <input type="checkbox"
								value="42">42 <input type="checkbox" value="43">43
							<input type="checkbox" value="44">44 <input
								type="checkbox" value="45">45 <input type="checkbox"
								value="46">46 <input type="checkbox" value="47">47
							<input type="checkbox" value="48">48 <input
								type="checkbox" value="49">49
						</div>
						<div class="imp secondList">
							<input type="checkbox" value="50">50 <input
								type="checkbox" value="51">51 <input type="checkbox"
								value="52">52 <input type="checkbox" value="53">53
							<input type="checkbox" value="54">54 <input
								type="checkbox" value="55">55 <input type="checkbox"
								value="56">56 <input type="checkbox" value="57">57
							<input type="checkbox" value="58">58 <input
								type="checkbox" value="59">59
						</div>
					</div>
					<div title="分钟">
						<div class="line">
							<input type="radio" checked="checked" name="min"
								onclick="everyTime(this)"> 分钟 允许的通配符[, - * /]
						</div>
						<div class="line">
							<input type="radio" name="min" onclick="cycle(this)"> 周期从
							<input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:58" value="1" id="minStart_0"> -
							<input class="numberspinner" style="width: 60px;"
								data-options="min:2,max:59" value="2" id="minEnd_0"> 分钟
						</div>
						<div class="line">
							<input type="radio" name="min" onclick="startOn(this)"> 从
							<input class="numberspinner" style="width: 60px;"
								data-options="min:0,max:59" value="0" id="minStart_1">
							分钟开始,每 <input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:59" value="1" id="minEnd_1">
							分钟执行一次
						</div>
						<div class="line">
							<input type="radio" name="min" id="min_appoint"> 指定
						</div>
						<div class="imp minList">
							<input type="checkbox" value="0">00 <input
								type="checkbox" value="1">01 <input type="checkbox"
								value="2">02 <input type="checkbox" value="3">03
							<input type="checkbox" value="4">04 <input
								type="checkbox" value="5">05 <input type="checkbox"
								value="6">06 <input type="checkbox" value="7">07
							<input type="checkbox" value="8">08 <input
								type="checkbox" value="9">09
						</div>
						<div class="imp minList">
							<input type="checkbox" value="10">10 <input
								type="checkbox" value="11">11 <input type="checkbox"
								value="12">12 <input type="checkbox" value="13">13
							<input type="checkbox" value="14">14 <input
								type="checkbox" value="15">15 <input type="checkbox"
								value="16">16 <input type="checkbox" value="17">17
							<input type="checkbox" value="18">18 <input
								type="checkbox" value="19">19
						</div>
						<div class="imp minList">
							<input type="checkbox" value="20">20 <input
								type="checkbox" value="21">21 <input type="checkbox"
								value="22">22 <input type="checkbox" value="23">23
							<input type="checkbox" value="24">24 <input
								type="checkbox" value="25">25 <input type="checkbox"
								value="26">26 <input type="checkbox" value="27">27
							<input type="checkbox" value="28">28 <input
								type="checkbox" value="29">29
						</div>
						<div class="imp minList">
							<input type="checkbox" value="30">30 <input
								type="checkbox" value="31">31 <input type="checkbox"
								value="32">32 <input type="checkbox" value="33">33
							<input type="checkbox" value="34">34 <input
								type="checkbox" value="35">35 <input type="checkbox"
								value="36">36 <input type="checkbox" value="37">37
							<input type="checkbox" value="38">38 <input
								type="checkbox" value="39">39
						</div>
						<div class="imp minList">
							<input type="checkbox" value="40">40 <input
								type="checkbox" value="41">41 <input type="checkbox"
								value="42">42 <input type="checkbox" value="43">43
							<input type="checkbox" value="44">44 <input
								type="checkbox" value="45">45 <input type="checkbox"
								value="46">46 <input type="checkbox" value="47">47
							<input type="checkbox" value="48">48 <input
								type="checkbox" value="49">49
						</div>
						<div class="imp minList">
							<input type="checkbox" value="50">50 <input
								type="checkbox" value="51">51 <input type="checkbox"
								value="52">52 <input type="checkbox" value="53">53
							<input type="checkbox" value="54">54 <input
								type="checkbox" value="55">55 <input type="checkbox"
								value="56">56 <input type="checkbox" value="57">57
							<input type="checkbox" value="58">58 <input
								type="checkbox" value="59">59
						</div>
					</div>
					<div title="小时">
						<div class="line">
							<input type="radio" checked="checked" name="hour"
								onclick="everyTime(this)"> 小时 允许的通配符[, - * /]
						</div>
						<div class="line">
							<input type="radio" name="hour" onclick="cycle(this)">
							周期从 <input class="numberspinner" style="width: 60px;"
								data-options="min:0,max:23" value="0" id="hourStart_0">
							- <input class="numberspinner" style="width: 60px;"
								data-options="min:2,max:23" value="2" id="hourEnd_1"> 小时
						</div>
						<div class="line">
							<input type="radio" name="hour" onclick="startOn(this)">
							从 <input class="numberspinner" style="width: 60px;"
								data-options="min:0,max:23" value="0" id="hourStart_1">
							小时开始,每 <input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:23" value="1" id="hourEnd_1">
							小时执行一次
						</div>
						<div class="line">
							<input type="radio" name="hour" id="hour_appoint"> 指定
						</div>
						<div class="imp hourList">
							AM: <input type="checkbox" value="0">00 <input
								type="checkbox" value="1">01 <input type="checkbox"
								value="2">02 <input type="checkbox" value="3">03
							<input type="checkbox" value="4">04 <input
								type="checkbox" value="5">05 <input type="checkbox"
								value="6">06 <input type="checkbox" value="7">07
							<input type="checkbox" value="8">08 <input
								type="checkbox" value="9">09 <input type="checkbox"
								value="10">10 <input type="checkbox" value="11">11
						</div>
						<div class="imp hourList">
							PM: <input type="checkbox" value="12">12 <input
								type="checkbox" value="13">13 <input type="checkbox"
								value="14">14 <input type="checkbox" value="15">15
							<input type="checkbox" value="16">16 <input
								type="checkbox" value="17">17 <input type="checkbox"
								value="18">18 <input type="checkbox" value="19">19
							<input type="checkbox" value="20">20 <input
								type="checkbox" value="21">21 <input type="checkbox"
								value="22">22 <input type="checkbox" value="23">23
						</div>
					</div>
					<div title="日">
						<div class="line">
							<input type="radio" checked="checked" name="day"
								onclick="everyTime(this)"> 日 允许的通配符[, - * / L W]
						</div>
						<div class="line">
							<input type="radio" name="day" onclick="unAppoint(this)">
							不指定
						</div>
						<div class="line">
							<input type="radio" name="day" onclick="cycle(this)"> 周期从
							<input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:31" value="1" id="dayStart_0"> -
							<input class="numberspinner" style="width: 60px;"
								data-options="min:2,max:31" value="2" id="dayEnd_0"> 日
						</div>
						<div class="line">
							<input type="radio" name="day" onclick="startOn(this)"> 从
							<input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:31" value="1" id="dayStart_1">
							日开始,每 <input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:31" value="1" id="dayEnd_1">
							天执行一次
						</div>
						<div class="line">
							<input type="radio" name="day" onclick="workDay(this)">
							每月 <input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:31" value="1" id="dayStart_2">
							号最近的那个工作日
						</div>
						<div class="line">
							<input type="radio" name="day" onclick="lastDay(this)">
							每月最后一天
						</div>
						<div class="line">
							<input type="radio" name="day" id="day_appoint"> 指定
						</div>
						<div class="imp dayList">
							<input type="checkbox" value="1">1 <input type="checkbox"
								value="2">2 <input type="checkbox" value="3">3 <input
								type="checkbox" value="4">4 <input type="checkbox"
								value="5">5 <input type="checkbox" value="6">6 <input
								type="checkbox" value="7">7 <input type="checkbox"
								value="8">8 <input type="checkbox" value="9">9 <input
								type="checkbox" value="10">10 <input type="checkbox"
								value="11">11 <input type="checkbox" value="12">12
							<input type="checkbox" value="13">13 <input
								type="checkbox" value="14">14 <input type="checkbox"
								value="15">15 <input type="checkbox" value="16">16
						</div>
						<div class="imp dayList">
							<input type="checkbox" value="17">17 <input
								type="checkbox" value="18">18 <input type="checkbox"
								value="19">19 <input type="checkbox" value="20">20
							<input type="checkbox" value="21">21 <input
								type="checkbox" value="22">22 <input type="checkbox"
								value="23">23 <input type="checkbox" value="24">24
							<input type="checkbox" value="25">25 <input
								type="checkbox" value="26">26 <input type="checkbox"
								value="27">27 <input type="checkbox" value="28">28
							<input type="checkbox" value="29">29 <input
								type="checkbox" value="30">30 <input type="checkbox"
								value="31">31
						</div>
					</div>
					<div title="月">
						<div class="line">
							<input type="radio" checked="checked" name="mouth"
								onclick="everyTime(this)"> 月 允许的通配符[, - * /]
						</div>
						<div class="line">
							<input type="radio" name="mouth" onclick="unAppoint(this)">
							不指定
						</div>
						<div class="line">
							<input type="radio" name="mouth" onclick="cycle(this)">
							周期从 <input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:12" value="1" id="mouthStart_0">
							- <input class="numberspinner" style="width: 60px;"
								data-options="min:2,max:12" value="2" id="mouthEnd_0"> 月
						</div>
						<div class="line">
							<input type="radio" name="mouth" onclick="startOn(this)">
							从 <input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:12" value="1" id="mouthStart_1">
							日开始,每 <input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:12" value="1" id="mouthEnd_1">
							月执行一次
						</div>
						<div class="line">
							<input type="radio" name="mouth" id="mouth_appoint"> 指定
						</div>
						<div class="imp mouthList">
							<input type="checkbox" value="1">1 <input type="checkbox"
								value="2">2 <input type="checkbox" value="3">3 <input
								type="checkbox" value="4">4 <input type="checkbox"
								value="5">5 <input type="checkbox" value="6">6 <input
								type="checkbox" value="7">7 <input type="checkbox"
								value="8">8 <input type="checkbox" value="9">9 <input
								type="checkbox" value="10">10 <input type="checkbox"
								value="11">11 <input type="checkbox" value="12">12
						</div>
					</div>
					<div title="周">
						<div class="line">
							<input type="radio" checked="checked" name="week"
								onclick="everyTime(this)"> 周 允许的通配符[, - * / L #]
						</div>
						<div class="line">
							<input type="radio" name="week" onclick="unAppoint(this)">
							不指定
						</div>
						<div class="line">
							<input type="radio" name="week" onclick="startOn(this)">
							周期 从星期<input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:7" id="weekStart_0" value="1"> -
							<input class="numberspinner" style="width: 60px;"
								data-options="min:2,max:7" value="2" id="weekEnd_0">
						</div>
						<div class="line">
							<input type="radio" name="week" onclick="weekOfDay(this)">
							第<input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:4" value="1" id="weekStart_1"> 周
							的星期<input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:7" id="weekEnd_1" value="1">
						</div>
						<div class="line">
							<input type="radio" name="week" onclick="lastWeek(this)">
							本月最后一个星期<input class="numberspinner" style="width: 60px;"
								data-options="min:1,max:7" id="weekStart_2" value="1">
						</div>
						<div class="line">
							<input type="radio" name="week" id="week_appoint"> 指定
						</div>
						<div class="imp weekList">
							<input type="checkbox" value="1">1 <input type="checkbox"
								value="2">2 <input type="checkbox" value="3">3 <input
								type="checkbox" value="4">4 <input type="checkbox"
								value="5">5 <input type="checkbox" value="6">6 <input
								type="checkbox" value="7">7
						</div>
					</div>
					<div title="年">
						<div class="line">
							<input type="radio" checked="checked" name="year"
								onclick="unAppoint(this)"> 不指定 允许的通配符[, - * /] 非必填
						</div>
						<div class="line">
							<input type="radio" name="year" onclick="everyTime(this)">
							每年
						</div>
						<div class="line">
							<input type="radio" name="year" onclick="cycle(this)">周期
							从 <input class="numberspinner" style="width: 90px;"
								data-options="min:2013,max:3000" id="yearStart_0" value="2013">
							- <input class="numberspinner" style="width: 90px;"
								data-options="min:2014,max:3000" id="yearEnd_0" value="2014">
						</div>
					</div>
				</div>
			</div>
			<div data-options="region:'south',border:false" style="height: 270px">
				<fieldset style="border-radius: 3px; height: 250px;">
					<legend>表达式</legend>
					<table style="height: 100px;">
						<tbody>
							<tr>
								<td></td>
								<td align="center">秒</td>
								<td align="center">分钟</td>
								<td align="center">小时</td>
								<td align="center">日</td>
								<td align="center">月<br />
								</td>
								<td align="center">星期</td>
								<td align="center">年</td>
							</tr>
							<tr>
								<td>表达式字段:</td>
								<td><input type="text" name="v_second" class="col"
									value="*" readonly="readonly" /></td>
								<td><input type="text" name="v_min" class="col" value="*"
									readonly="readonly" /></td>
								<td><input type="text" name="v_hour" class="col" value="*"
									readonly="readonly" /></td>
								<td><input type="text" name="v_day" class="col" value="*"
									readonly="readonly" /></td>
								<td><input type="text" name="v_mouth" class="col" value="*"
									readonly="readonly" /></td>
								<td><input type="text" name="v_week" class="col" value="?"
									readonly="readonly" /></td>
								<td><input type="text" name="v_year" class="col"
									readonly="readonly" /></td>
							</tr>
							<tr>
								<td>Cron 表达式:</td>
								<td colspan="6"><input type="text" name="cron"
									style="width: 100%;" value="* * * * * ?" id="cron"/></td>
								<td><input type="button" value="反解析到UI "
									style="margin-left: 10px;" id="btnFan" onclick="btnFan()" /></td>
							</tr>
							<tr>
								<td colspan="8">最近5次运行时间:</td>
							</tr>
							<tr>
								<td colspan="8" id="runTime"></td>
							</tr>
						</tbody>
					</table>
				</fieldset>
			</div>
			<div></div>
		</div>
		<div class="easyui-layout"
			style="width: 830px; height: 195px; border: 1px rgb(202, 196, 196) solid; border-radius: 5px; margin-top: 5px;">
			<div data-options="region:'south',border:false" style="height: 195px">
				<fieldset style="border-radius: 3px; height: 176px;">
					<legend>常用Cron表达式</legend>
					<table>
						<tr>
							<td>0 15 10 * * ? *</td>
							<td>每天10点15分触发</td>
						</tr>
						<tr>
							<td>0 15 10 * * ? 2017</td>
							<td>2017年每天10点15分触发</td>
						</tr>
						<tr>
							<td>0 * 14 * * ?</td>
							<td>每天下午的 2点到2点59分每分触发</td>
						</tr>
						<tr>
							<td>0 0/5 14 * * ?</td>
							<td>每天下午的 2点到2点59分(整点开始，每隔5分触发)</td>
						</tr>
						<tr>
							<td>0 0/5 14,18 * * ?</td>
							<td>每天下午的 2点到2点59分、18点到18点59分(整点开始，每隔5分触发)</td>
						</tr>
						<tr>
							<td>0 0-5 14 * * ?</td>
							<td>每天下午的 2点到2点05分每分触发</td>
						</tr>
						<tr>
							<td>0 15 10 ? * 6L</td>
							<td>每月最后一周的星期五的10点15分触发</td>
						</tr>
						<tr>
							<td>0 15 10 ? * 6#3</td>
							<td>每月的第三周的星期五开始触发</td>
						</tr>
						<tr>
							<td></td>
							<td></td>
						</tr>
					</table>
				</fieldset>
			</div>
		</div>
		<div class="easyui-layout"
			style="width: 830px; height: 30px; border: 1px rgb(202, 196, 196) solid; border-radius: 5px; margin-top: 5px;">
			<div style="height: 30px;padding: 6px 10px 6px 10px;font-size: 12px;">
				Cron在线表达式生成器
			</div>
		</div>
		<!--注意id不能变，因为使用add系统固定函数绑定了id-->
		<a id="btn_sub" href="#" onclick="updateCronExpression()" disabled="true"></a>
		<input type="hidden" id="cronid" value="" readonly="readonly">
	</center>
	<script type="text/javascript"
		src="http://lib.sinaapp.com/js/jquery/2.2.4/jquery-2.2.4.min.js"></script>
	<script type="text/javascript">
		if (!window.jQuery) {
			var s = document.createElement('script');
			s.src = 'plug-in/Cron/jquery-2.1.4.min.js';
			document.body.appendChild(s);
		}
	</script>
	<script type="text/javascript"
		src="plug-in/Cron/jquery.easyui.min.js"></script>
	<script src="plug-in/Cron/cron.js" type="text/javascript"></script>
	<script>
		//js获取url参数
		function getQueryString(name) {
			var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)", "i");
			var r = window.location.search.substr(1).match(reg);
			if (r != null) return decodeURI(r[2]); return null;
		}

		function updateCronExpression() {
//			console.log('测试通过');
//			window.parent.tip('asdas');
			var cronValue=$("#cron").val();
//			console.log(cronValue);
			var cronid=$("#cronid").val();
			if(typeof cronValue!=undefined&&cronValue!=null&&cronValue!=''){

				$.ajax({
					url:'timeTaskController.do?updateCronExpression&cronExpression='+cronValue+'&cronid='+cronid,
//					data:{cronExpression:cronValue,cronid:cronid},
					type:'post',
					async:true,
					dataType:'json',
					success:function (data,textStatus) {
//						var d=$.parseJSON(data);
//						if(d==null||undefined==typeof data){d=data};
//						console.log(data);
						if(data.success){
//刷新整个层页面
//							window.parent.location.reload();

							//刷新网格
//							$('#timeTaskList', window.parent.document).datagrid('reload');
//							console.log(window.parent[1]);
							window.parent[1].reloadTable();

//							第一种关闭方法：
							frameElement.api.close();
//							第二种关闭方法：设置了id才能使用
//							$.dialog({id:'editYundong'}).close();



//							window.parent.tip(data.msg);
						}else{
//							window.parent.tip(data.msg);
						}
					},
					error:function (xmlHttpRequest,textStatus,errorThrow) {

					}

				})
			}else{
				alert('cron表达式参数为空！');
			}

		}

		/**
		 * 获取编辑信息到在线生成器中并反解析
         */
		$(document).ready(function () {
//			console.log(getQueryString('cronExpression'));
			var cronid=getQueryString('id');
			$("#cronid").val(cronid);
			var cronValue=getQueryString('cronExpression');
//			console.log(cronValue.length);
			if(typeof cronValue!=undefined&&cronValue!=null&&cronValue!=''){
				//赋值取值多了空格
//				$("#cron").val(cronValue);

				$("#cron").attr("value",cronValue);

//				console.log($("#cron").val());
//				console.log($("#cron").attr("value"));

				btnFan();
			}



		});

		var _hmt = _hmt || [];
		(function() {
			var hm = document.createElement("script");
			hm.src = "https://hm.baidu.com/hm.js?97d55e5360f49f38b678f0c25a1907be";
			var s = document.getElementsByTagName("script")[0];
			s.parentNode.insertBefore(hm, s);
		})();

	</script>

</body>
</html>
